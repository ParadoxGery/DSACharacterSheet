<div class="container">
    <div class="sheet-general">
        <div class="table">
            <div class="row two-col-row">
                <div class="cell">
                    <input type="text" name="attr_character_name" value="@{character_name}">
                    <span data-i18n="character_name_desc">CHARACTER NAME</span>
                </div>
                <div class="cell">
                    <input type="text" name="attr_character_profession">
                    <span data-i18n="character_profession_desc">PROFESSION</span>
                </div>
            </div>
            <div class="row two-col-row">
                <div class="cell">
                    <select name="attr_race">
                        <option data-i18n="human" value="human">Mensch</option>
                        <option data-i18n="elf" value="elf">Elf</option>
                        <option data-i18n="halfelf" value="halfelf">Halbelf</option>
                        <option data-i18n="dwarf" value="dwarf">Zwerg</option>
                    </select>
                    <span data-i18n="character_race_desc">VOLK</span>
                </div>
                <div class="cell">
                    <input type="text" name="attr_character_culture">
                    <span data-i18n="character_race_culture_desc">KULTUR</span>
                </div>
            </div>
            <div class="row two-col-row">
                <div class="cell">
                    <select name="attr_sex">
                        <option data-i18n="male" value="male">männlich</option>
                        <option data-i18n="female" value="female">weiblich</option>
                        <option data-i18n="unknown" value="unknown">unbekannt</option>
                    </select>
                    <span data-i18n="character_sex_desc">GESCHLECHT</span>
                </div>
                <div class="cell">
                    <input type="text" name="attr_birthday_age">
                    <span data-i18n="character_birthday_age_desc">GEBURTSTAG/ALTER</span>
                </div>
            </div>
            <div class="row two-col-row">

            </div>
        </div>
        <div class="table attribute-table">
            <div class="row three-col-row">
                <div class="cell attribute-list">
                    <div><span data-i18n="attr_mu">MU</span><input type="number" name="attr_MU" value="8"></div>
                    <div><span data-i18n="attr_kl">KL</span><input type="number" name="attr_KL" value="8"></div>
                    <div><span data-i18n="attr_in">IN</span><input type="number" name="attr_MU" value="8"></div>
                    <div><span data-i18n="attr_ch">CH</span><input type="number" name="attr_CH" value="8"></div>
                    <div><span data-i18n="attr_ff">FF</span><input type="number" name="attr_FF" value="8"></div>
                    <div><span data-i18n="attr_ge">GE</span><input type="number" name="attr_GE" value="8"></div>
                    <div><span data-i18n="attr_ko">KO</span><input type="number" name="attr_KO" value="8"></div>
                    <div><span data-i18n="attr_kk">KK</span><input type="number" name="attr_KK" value="8"></div>
                </div>
                <div class="cell attribute-list">
                    <div><span data-i18n="attr_so">SO</span><input type="number" name="attr_SO" value="0"></div>
                    <div><span data-i18n="attr_mr">MR</span><input type="number" name="attr_MR" value="-4"></div>
                    <div><span data-i18n="attr_gs">GS</span><input type="number" name="attr_GS" value="8"></div>
                </div>
                <div class="cell attribute-list">
                    <div><span data-i18n="attr_base_at">AT-Basis</span><input type="number" name="attr_AT_base" value="0" disabled></div>
                    <div><span data-i18n="attr_base_pa">PA-Basis</span><input type="number" name="attr_PA_base" value="0" disabled></div>
                    <div><span data-i18n="attr_base_fk">FK-Basis</span><input type="number" name="attr_FK_base" value="0" disabled></div>
                    <div><span data-i18n="attr_base_dodge">Ausweichen</span><input type="number" name="attr_dodge_base" value="0" disabled></div>
                    <div><span data-i18n="attr_base_ini">Initative</span><input type="number" name="attr_ini_base" value="0" disabled></div>
                </div>
            </div>

        </div>
    </div>
    <div class="sheet-talents">

    </div>
    <div class="sheet-fighting">

    </div>
    <div class="sheet-magic">

    </div>
    <div class="sheet-divine">

    </div>
    <div class="sheet-inventory">

    </div>
    <div class="sheet-config">

    </div>
</div>

<rolltemplate class="sheet-rolltemplate-DSA-Eigenschaft">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">Eigenschaft</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Probe:</span>{{Probe}}</td></tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Nahkampf-AT">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtags}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Attackewurf: </span>{{wurf}}</td></tr>
        {{#rollGreater() mod 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{mod}}</td></tr>
        {{/rollGreater() mod 0}}
        {{#rollLess() mod 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{mod}}</td></tr>
        {{/rollLess() mod 0}}
        {{#rollGreater() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Mißlungen</td></tr>
        {{/rollGreater() wurf wert}}
        {{#rollTotal() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollTotal() wurf wert}}
        {{#rollLess() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollLess() wurf wert}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Nahkampf-AT-Patzer">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>{{wurf}}</td></tr>
        {{#rollTotal() wurf 2}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe zerstört</td></tr>
        {{/rollTotal() wurf 2}}
        {{#rollTotal() wurf 3}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe schwer beschädigt</td></tr>
        {{/rollTotal() wurf 3}}
        {{#rollTotal() wurf 4}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe beschädigt</td></tr>
        {{/rollTotal() wurf 4}}
        {{#rollTotal() wurf 5}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe verloren</td></tr>
        {{/rollTotal() wurf 5}}
        {{#rollTotal() wurf 6}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe stecken geblieben</td></tr>
        {{/rollTotal() wurf 6}}
        {{#rollTotal() wurf 7}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Sturz</td></tr>
        {{/rollTotal() wurf 7}}
        {{#rollTotal() wurf 8}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Stolpern</td></tr>
        {{/rollTotal() wurf 8}}
        {{#rollTotal() wurf 9}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Fuß verdreht</td></tr>
        {{/rollTotal() wurf 9}}
        {{#rollTotal() wurf 10}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Beule</td></tr>
        {{/rollTotal() wurf 10}}
        {{#rollTotal() wurf 11}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Selbst verletzt</td></tr>
        {{/rollTotal() wurf 11}}
        {{#rollTotal() wurf 12}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Selbst schwer verletzt</td></tr>
        {{/rollTotal() wurf 12}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Nahkampf-Schild-Patzer">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>{{wurf}}</td></tr>
        {{#rollTotal() wurf 2}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Schild zerstört</td></tr>
        {{/rollTotal() wurf 2}}
        {{#rollTotal() wurf 3}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Schild schwer beschädigt</td></tr>
        {{/rollTotal() wurf 3}}
        {{#rollTotal() wurf 4}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Schild beschädigt</td></tr>
        {{/rollTotal() wurf 4}}
        {{#rollTotal() wurf 5}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Schild verloren</td></tr>
        {{/rollTotal() wurf 5}}
        {{#rollTotal() wurf 6}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Schild stecken geblieben</td></tr>
        {{/rollTotal() wurf 6}}
        {{#rollTotal() wurf 7}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Stolpern</td></tr>
        {{/rollTotal() wurf 7}}
        {{#rollTotal() wurf 8}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Sturz</td></tr>
        {{/rollTotal() wurf 8}}
        {{#rollTotal() wurf 9}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Fuß verdreht</td></tr>
        {{/rollTotal() wurf 9}}
        {{#rollTotal() wurf 10}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Beule</td></tr>
        {{/rollTotal() wurf 10}}
        {{#rollTotal() wurf 11}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Selbst verletzt</td></tr>
        {{/rollTotal() wurf 11}}
        {{#rollTotal() wurf 12}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Selbst schwer verletzt</td></tr>
        {{/rollTotal() wurf 12}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Nahkampf-VE">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtags}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Verteidigungswurf: </span>{{wurf}}</td></tr>
        {{#rollGreater() mod 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{mod}}</td></tr>
        {{/rollGreater() mod 0}}
        {{#rollLess() mod 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{mod}}</td></tr>
        {{/rollLess() mod 0}}
        {{#rollGreater() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Mißlungen</td></tr>
        {{/rollGreater() wurf wert}}
        {{#rollTotal() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollTotal() wurf wert}}
        {{#rollLess() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollLess() wurf wert}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Fernkampf-AT">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtags}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Attackewurf: </span>{{wurf}}</td></tr>
        {{#rollGreater() mod 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{mod}}</td></tr>
        {{/rollGreater() mod 0}}
        {{#rollLess() mod 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{mod}}</td></tr>
        {{/rollLess() mod 0}}
        {{#rollGreater() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Mißlungen</td></tr>
        {{/rollGreater() wurf wert}}
        {{#rollTotal() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollTotal() wurf wert}}
        {{#rollLess() wurf wert}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollLess() wurf wert}}
    </table>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-DSA-Fernkampf-AT-Patzer">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>{{wurf}}</td></tr>
        {{#rollTotal() wurf 2}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe zerstört</td></tr>
        {{/rollTotal() wurf 2}}
        {{#rollTotal() wurf 3}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe schwer beschädigt</td></tr>
        {{/rollTotal() wurf 3}}
        {{#rollTotal() wurf 4}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe beschädigt</td></tr>
        {{/rollTotal() wurf 4}}
        {{#rollTotal() wurf 5}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Waffe verloren</td></tr>
        {{/rollTotal() wurf 5}}
        {{#rollTotal() wurf 6}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Kamerad/Unschuldiger getroffen</td></tr>
        {{/rollTotal() wurf 6}}
        {{#rollTotal() wurf 7}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Fehlschuss</td></tr>
        {{/rollTotal() wurf 7}}
        {{#rollTotal() wurf 8}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Zerrung</td></tr>
        {{/rollTotal() wurf 8}}
        {{#rollTotal() wurf 9}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Sehne herausgerutscht / Waffe nicht richtig gegriffen / Ladehemmung</td></tr>
        {{/rollTotal() wurf 9}}
        {{#rollTotal() wurf 10}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Zu konzentriert</td></tr>
        {{/rollTotal() wurf 10}}
        {{#rollTotal() wurf 11}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Selbst verletzt</td></tr>
        {{/rollTotal() wurf 11}}
        {{#rollTotal() wurf 12}}
        <tr class="rowcolor"><td><span class="tcat">Auswirkung: </span>Schwer verletzt</td></tr>
        {{/rollTotal() wurf 12}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Nahkampf-TP">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtags}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Trefferpunkte:</span>{{damage}}</td></tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Fernkampf-TP">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtags}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Trefferpunkte:</span>{{damage}}</td></tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Talente">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtags}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        {{#rollGreater() Talent -1}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollGreater() Talent -1}}
        {{#rollLess() Talent 0}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Mißlungen</td></tr>
        {{/rollLess() Talent 0}}
        <tr class="rowcolor"><td><span class="tcat">FP: </span>{{Talent}}</td></tr>
        {{#rollBetween() Talent 0 3}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>1</td></tr>
        {{/rollBetween() Talent 0 3}}
        {{#rollBetween() Talent 4 6}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>2</td></tr>
        {{/rollBetween() Talent 4 6}}
        {{#rollBetween() Talent 7 9}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>3</td></tr>
        {{/rollBetween() Talent 7 9}}
        {{#rollBetween() Talent 10 12}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>4</td></tr>
        {{/rollBetween() Talent 10 12}}
        {{#rollBetween() Talent 13 15}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>5</td></tr>
        {{/rollBetween() Talent 13 15}}
        {{#rollBetween() Talent 16 18}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>6</td></tr>
        {{/rollBetween() Talent 16 18}}
        {{#rollBetween() Talent 19 21}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>7</td></tr>
        {{/rollBetween() Talent 19 21}}
        {{#rollGreater() Modifikator 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{Modifikator}}</td></tr>
        {{/rollGreater() Modifikator 0}}
        {{#rollLess() Modifikator 0}}
        <tr class="rowcolor"><td><span class="tcat">Modifikator: </span>{{Modifikator}}</td></tr>
        {{/rollLess() Modifikator 0}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Zauber">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtag}}, {{subtag1}}, {{subtag2}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        {{#rollGreater() Zauber -1}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollGreater() Zauber -1}}
        {{#rollLess() Zauber 0}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Mißlungen</td></tr>
        {{/rollLess() Zauber 0}}
        <tr class="rowcolor"><td><span class="tcat">FP: </span>{{Zauber}}</td></tr>
        {{#rollBetween() Zauber 0 3}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>1</td></tr>
        {{/rollBetween() Zauber 0 3}}
        {{#rollBetween() Zauber 4 6}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>2</td></tr>
        {{/rollBetween() Zauber 4 6}}
        {{#rollBetween() Zauber 7 9}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>3</td></tr>
        {{/rollBetween() Zauber 7 9}}
        {{#rollBetween() Zauber 10 12}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>4</td></tr>
        {{/rollBetween() Zauber 10 12}}
        {{#rollBetween() Zauber 13 15}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>5</td></tr>
        {{/rollBetween() Zauber 13 15}}
        {{#rollBetween() Zauber 16 18}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>6</td></tr>
        {{/rollBetween() Zauber 16 18}}
        {{#rollBetween() Zauber 19 21}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>7</td></tr>
        {{/rollBetween() Zauber 19 21}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-DSA-Liturgie">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtag}}, {{subtag1}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        {{#rollGreater() Liturgie -1}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Gelungen</td></tr>
        {{/rollGreater() Liturgie -1}}
        {{#rollLess() Liturgie 0}}
        <tr class="rowcolor"><td><span class="tcat">Ergebnis: </span>Mißlungen</td></tr>
        {{/rollLess() Liturgie 0}}
        <tr class="rowcolor"><td><span class="tcat">FP: </span>{{Liturgie}}</td></tr>
        {{#rollBetween() Liturgie 0 3}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>1</td></tr>
        {{/rollBetween() Liturgie 0 3}}
        {{#rollBetween() Liturgie 4 6}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>2</td></tr>
        {{/rollBetween() Liturgie 4 6}}
        {{#rollBetween() Liturgie 7 9}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>3</td></tr>
        {{/rollBetween() Liturgie 7 9}}
        {{#rollBetween() Liturgie 10 12}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>4</td></tr>
        {{/rollBetween() Liturgie 10 12}}
        {{#rollBetween() Liturgie 13 15}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>5</td></tr>
        {{/rollBetween() Liturgie 13 15}}
        {{#rollBetween() Liturgie 16 18}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>6</td></tr>
        {{/rollBetween() Liturgie 16 18}}
        {{#rollBetween() Liturgie 19 21}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>7</td></tr>
        {{/rollBetween() Liturgie 19 21}}
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-Routineprobe">
    <table>
        <tr><th>{{name}}</th></tr>
        <tr><td class="subheader">{{subtags}}</td></tr>
        <tr class="arrow-container"><td><div class="arrow-right"></div></td></tr>
        <tr class="rowcolor"><td><span class="tcat">Eigenschaften: </span>
            {{#rollGreater() Eigenschaft1 12}}
            ✓
            {{/rollGreater() Eigenschaft1 12}}
            /
            {{#rollLess() Eigenschaft1 13}}
            X
            {{/rollLess() Eigenschaft1 13}}
            {{#rollGreater() Eigenschaft2 12}}
            ✓
            {{/rollGreater() Eigenschaft2 12}}
            {{#rollLess() Eigenschaft2 13}}
            X
            {{/rollLess() Eigenschaft2 13}}
            /
            {{#rollGreater() Eigenschaft3 12}}
            ✓
            {{/rollGreater() Eigenschaft3 12}}
            {{#rollLess() Eigenschaft3 13}}
            X
            {{/rollLess() Eigenschaft3 13}}
        </td></tr>
        {{#rollTotal() FP 0}}
        <tr class="rowcolor"><td><span class="tcat">FW-Minimum nicht erfüllt</span></td></tr>
        {{/rollTotal() FP 0}}
        {{#rollGreater() FP 0}}
        <tr class="rowcolor"><td><span class="tcat">FP: </span>{{FP}}</td></tr>
        {{/rollGreater() FP 0}}
        {{#rollBetween() FP 1 3}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>1</td></tr>
        {{/rollBetween() FP 1 3}}
        {{#rollBetween() FP 4 6}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>2</td></tr>
        {{/rollBetween() FP 4 6}}
        {{#rollBetween() FP 7 9}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>3</td></tr>
        {{/rollBetween() FP 7 9}}
        {{#rollBetween() FP 10 12}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>4</td></tr>
        {{/rollBetween() FP 10 12}}
        {{#rollBetween() FP 13 15}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>5</td></tr>
        {{/rollBetween() FP 13 15}}
        {{#rollBetween() FP 16 18}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>6</td></tr>
        {{/rollBetween() FP 16 18}}
        {{#rollBetween() FP 19 21}}
        <tr class="rowcolor"><td><span class="tcat">QS: </span>7</td></tr>
        {{/rollBetween() FP 19 21}}
        {{#rollGreater() FP 0}}
        <tr class="rowcolor"><td><span class="tcat">Max. Modifikator: </span>{{Modifikator}}</td></tr>
        {{/rollGreater() FP 0}}
    </table>
</rolltemplate>

<script type="text/worker">

on("change:erfahrungsgrad", function() {
   getAttrs(["Erfahrungsgrad", "APgesamt"], function(values) {
		if (values.APgesamt == null || values.APgesamt == 0 || values.APgesamt == 900 || values.APgesamt == 1000 || values.APgesamt == 1100 || values.APgesamt == 1200 || values.APgesamt == 1400 || values.APgesamt == 1700 || values.APgesamt == 2100 ) {
			if (values.Erfahrungsgrad == "Unerfahren") {
				setAttrs({
          			APgesamt: 900
      			});
			}
			if (values.Erfahrungsgrad == "Durchschnittlich") {
				setAttrs({
          			APgesamt: 1000
      			});
			}
			if (values.Erfahrungsgrad == "Erfahren") {
				setAttrs({
          			APgesamt: 1100
      			});
			}
			if (values.Erfahrungsgrad == "Kompetent") {
				setAttrs({
          			APgesamt: 1200
      			});
			}
			if (values.Erfahrungsgrad == "Meisterlich") {
				setAttrs({
          			APgesamt: 1400
      			});
			}
			if (values.Erfahrungsgrad == "Brillant") {
				setAttrs({
          			APgesamt: 1700
      			});
			}
			if (values.Erfahrungsgrad == "Legendaer") {
				setAttrs({
          			APgesamt: 2100
      			});
			}
		}
   });
});

on("change:spezies", function() {
   getAttrs(["Spezies"], function(values) {
		if (values.Spezies == "Mensch") {
			setAttrs({
       			LE_Spezies: 5,
				SK_Spezies: -5,
				ZK_Spezies: -5,
				GS_Spezies: 8
   			});
		}
		if (values.Spezies == "Elf") {
			setAttrs({
       			LE_Spezies: 2,
				SK_Spezies: -4,
				ZK_Spezies: -6,
				GS_Spezies: 8
   			});
		}
		if (values.Spezies == "Halbelf") {
			setAttrs({
       			LE_Spezies: 5,
				SK_Spezies: -4,
				ZK_Spezies: -6,
				GS_Spezies: 8
    		});
		}
		if (values.Spezies == "Zwerg") {
			setAttrs({
          		LE_Spezies: 8,
				SK_Spezies: -4,
				ZK_Spezies: -4,
				GS_Spezies: 6
      		});
		}
   });
});

on("change:mu_grundwert change:mu_zukauf", function() {
   getAttrs(["MU_Grundwert", "MU_Zukauf"], function(values) {
		setAttrs({
			MU_Wert: parseInt(values.MU_Grundwert) + parseInt(values.MU_Zukauf)
		});
   });
});

on("change:kl_grundwert change:kl_zukauf", function() {
   getAttrs(["KL_Grundwert", "KL_Zukauf"], function(values) {
		setAttrs({
			KL_Wert: parseInt(values.KL_Grundwert) + parseInt(values.KL_Zukauf)
		});
   });
});

on("change:in_grundwert change:in_zukauf", function() {
   getAttrs(["IN_Grundwert", "IN_Zukauf"], function(values) {
		setAttrs({
			IN_Wert: parseInt(values.IN_Grundwert) + parseInt(values.IN_Zukauf)
		});
   });
});

on("change:ch_grundwert change:ch_zukauf", function() {
   getAttrs(["CH_Grundwert", "CH_Zukauf"], function(values) {
		setAttrs({
			CH_Wert: parseInt(values.CH_Grundwert) + parseInt(values.CH_Zukauf)
		});
   });
});

on("change:ff_grundwert change:ff_zukauf", function() {
   getAttrs(["FF_Grundwert", "FF_Zukauf"], function(values) {
		setAttrs({
			FF_Wert: parseInt(values.FF_Grundwert) + parseInt(values.FF_Zukauf)
		});
   });
});

on("change:ge_grundwert change:ge_zukauf", function() {
   getAttrs(["GE_Grundwert", "GE_Zukauf"], function(values) {
		setAttrs({
			GE_Wert: parseInt(values.GE_Grundwert) + parseInt(values.GE_Zukauf)
		});
   });
});

on("change:ko_grundwert change:ko_zukauf", function() {
   getAttrs(["KO_Grundwert", "KO_Zukauf"], function(values) {
		setAttrs({
			KO_Wert: parseInt(values.KO_Grundwert) + parseInt(values.KO_Zukauf)
		});
   });
});

on("change:kk_grundwert change:kk_zukauf", function() {
   getAttrs(["KK_Grundwert", "KK_Zukauf"], function(values) {
		setAttrs({
			KK_Wert: parseInt(values.KK_Grundwert) + parseInt(values.KK_Zukauf)
		});
   });
});

on("change:mu_wert", function() {
   getAttrs(["MU_Wert"], function(values) {
		setAttrs({
			Leiteigenschaft_AT_Mod: Math.floor((parseInt(values.MU_Wert)-8)/3)
		});
   });
});




on("change:tradition", function() {
   getAttrs(["Tradition"], function(values) {
		if (values.Tradition == "---") {
			setAttrs({
       			tradition_gildenmagier: 0,
				tradition_hexe: 0,
				tradition_elf: 0,
				tradition_goblin: 0,
				tradition_zibilja: 0,
				Tradition_Leiteigenschaft: "--"
   			});
		}
		if (values.Tradition == "Gildenmagier") {
			setAttrs({
       			tradition_gildenmagier: 1,
				tradition_hexe: 0,
				tradition_elf: 0,
				tradition_goblin: 0,
				tradition_zibilja: 0,
				Tradition_Leiteigenschaft: "KL"
   			});
		}
		if (values.Tradition == "Hexe") {
			setAttrs({
       			tradition_gildenmagier: 0,
				tradition_hexe: 1,
				tradition_elf: 0,
				tradition_goblin: 0,
				tradition_zibilja: 0,
				Tradition_Leiteigenschaft: "CH"
   			});
		}
		if (values.Tradition == "Elf") {
			setAttrs({
       			tradition_gildenmagier: 0,
				tradition_hexe: 0,
				tradition_elf: 1,
				tradition_goblin: 0,
				tradition_zibilja: 0,
				Tradition_Leiteigenschaft: "IN"
   			});
		}
		if (values.Tradition == "Goblinzauberinnen") {
			setAttrs({
       			tradition_gildenmagier: 0,
				tradition_hexe: 0,
				tradition_elf: 0,
				tradition_goblin: 1,
				tradition_zibilja: 0,
				Tradition_Leiteigenschaft: "IN"
   			});
		}
		if (values.Tradition == "Zibilja") {
			setAttrs({
       			tradition_gildenmagier: 0,
				tradition_hexe: 0,
				tradition_elf: 0,
				tradition_goblin: 0,
				tradition_zibilja: 1,
				Tradition_Leiteigenschaft: "IN"
   			});
		}
   });
});

on("change:tradition_leiteigenschaft", function() {
   getAttrs(["Tradition_Leiteigenschaft", "KL_Wert", "IN_Wert", "CH_Wert"], function(values) {
		if (values.Tradition_Leiteigenschaft == "--") {
			setAttrs({
				AE_Leiteigenschaft: 0
   			});
		}
		if (values.Tradition_Leiteigenschaft == "KL") {
			setAttrs({
				AE_Leiteigenschaft: values.KL_Wert
   			});
		}
		if (values.Tradition_Leiteigenschaft == "IN") {
			setAttrs({
				AE_Leiteigenschaft: values.IN_Wert
   			});
		}
		if (values.Tradition_Leiteigenschaft == "CH") {
			setAttrs({
				AE_Leiteigenschaft: values.CH_Wert
   			});
		}
   });
});

on("change:tradition_goetter", function() {
   getAttrs(["tradition_goetter"], function(values) {
		if (values.tradition_goetter == "---") {
			setAttrs({
				tradition_goetter_leiteigenschaft: "--"
   			});
		}
		if (values.tradition_goetter == "Praios") {
			setAttrs({
       			tradition_goetter_leiteigenschaft: "KL"
   			});
		}
		if (values.tradition_goetter == "Rondra") {
			setAttrs({
       			tradition_goetter_leiteigenschaft: "MU"
   			});
		}
		if (values.tradition_goetter == "Boron") {
			setAttrs({
				tradition_goetter_leiteigenschaft: "MU"
   			});
		}
		if (values.tradition_goetter == "Hesinde") {
			setAttrs({
				tradition_goetter_leiteigenschaft: "KL"
   			});
		}
		if (values.tradition_goetter == "Phex") {
			setAttrs({
				tradition_goetter_leiteigenschaft: "IN"
   			});
		}
		if (values.tradition_goetter == "Peraine") {
			setAttrs({
				tradition_goetter_leiteigenschaft: "IN"
   			});
		}
   });
});

on("change:tradition_goetter_leiteigenschaft", function() {
   getAttrs(["tradition_goetter_leiteigenschaft", "KL_Wert", "IN_Wert", "MU_Wert"], function(values) {
		if (values.tradition_goetter_leiteigenschaft == "--") {
			setAttrs({
				KE_Leiteigenschaft: 0
   			});
		}
		if (values.tradition_goetter_leiteigenschaft == "KL") {
			setAttrs({
				KE_Leiteigenschaft: values.KL_Wert
   			});
		}
		if (values.tradition_goetter_leiteigenschaft == "IN") {
			setAttrs({
				KE_Leiteigenschaft: values.IN_Wert
   			});
		}
		if (values.tradition_goetter_leiteigenschaft == "MU") {
			setAttrs({
				KE_Leiteigenschaft: values.MU_Wert
   			});
		}
   });
});

on("change:nkw_aktiv change:at_nkw1 change:at_nkw2 change:at_nkw3 change:at_nkw4 change:pa_nkw1 change:pa_nkw2 change:pa_nkw3 change:pa_nkw4 change:reichweitenkwaffe1 change:reichweitenkwaffe2 change:reichweitenkwaffe3 change:reichweitenkwaffe4 change:nkwschaden1_1 change:nkwschaden2_1 change:nkwschaden3_1 change:nkwschaden4_1 change:nkwschaden1_2 change:nkwschaden2_2 change:nkwschaden3_2 change:nkwschaden4_2 change:ehalszh_nkw1 change:ehalszh_nkw2 change:ehalszh_nkw3 change:ehalszh_nkw4", function() {
   getAttrs(["NKW_Aktiv", "AT_NKW1", "AT_NKW2", "AT_NKW3", "AT_NKW4", "PA_NKW1", "PA_NKW2", "PA_NKW3", "PA_NKW4", "ReichweiteNKWaffe1", "ReichweiteNKWaffe2", "ReichweiteNKWaffe3", "ReichweiteNKWaffe4", "NKWschaden1_1", "NKWschaden2_1", "NKWschaden3_1", "NKWschaden4_1", "NKWschaden1_2", "NKWschaden2_2", "NKWschaden3_2", "NKWschaden4_2", "EHalsZH_NKW1", "EHalsZH_NKW2", "EHalsZH_NKW3", "EHalsZH_NKW4"], function(values) {
		if (values.NKW_Aktiv == 1) {
			setAttrs({
				AT_Aktiv_Waffe: values.AT_NKW1,
				PA_Aktiv_Waffe: values.PA_NKW1,
				NKW_Aktiv_Reichweite: values.ReichweiteNKWaffe1,
				TP_W_Aktiv_Waffe: values.NKWschaden1_1,
				TP_Bonus_Aktiv_Waffe: parseInt(values.NKWschaden1_2) + parseInt(values.EHalsZH_NKW1)
   			});
		}
		if (values.NKW_Aktiv == 2) {
			setAttrs({
				AT_Aktiv_Waffe: values.AT_NKW2,
				PA_Aktiv_Waffe: values.PA_NKW2,
				NKW_Aktiv_Reichweite: values.ReichweiteNKWaffe2,
				TP_W_Aktiv_Waffe: values.NKWschaden2_1,
				TP_Bonus_Aktiv_Waffe: parseInt(values.NKWschaden2_2) + parseInt(values.EHalsZH_NKW2)
   			});
		}
		if (values.NKW_Aktiv == 3) {
			setAttrs({
				AT_Aktiv_Waffe: values.AT_NKW3,
				PA_Aktiv_Waffe: values.PA_NKW3,
				NKW_Aktiv_Reichweite: values.ReichweiteNKWaffe3,
				TP_W_Aktiv_Waffe: values.NKWschaden3_1,
				TP_Bonus_Aktiv_Waffe: parseInt(values.NKWschaden3_2) + parseInt(values.EHalsZH_NKW3)
   			});
		}
		if (values.NKW_Aktiv == 4) {
			setAttrs({
				AT_Aktiv_Waffe: values.AT_NKW4,
				PA_Aktiv_Waffe: values.PA_NKW4,
				NKW_Aktiv_Reichweite: values.ReichweiteNKWaffe4,
				TP_W_Aktiv_Waffe: values.NKWschaden4_1,
				TP_Bonus_Aktiv_Waffe: parseInt(values.NKWschaden4_2) + parseInt(values.EHalsZH_NKW4)
   			});
		}
   });
});

on("change:fkw_aktiv change:fkwfk1 change:fkwfk2 change:fkwfk3 change:fkwfk4 change:fkwschaden1_1 change:fkwschaden2_1 change:fkwschaden3_1 change:fkwschaden4_1 change:fkwschaden1_2 change:fkwschaden2_2 change:fkwschaden3_2 change:fkwschaden4_2 change:fkwreichweite1 change:fkwreichweite2 change:fkwreichweite3 change:fkwreichweite4", function() {
   getAttrs(["FKW_Aktiv", "FKWFK1", "FKWFK2", "FKWFK3", "FKWFK4", "FKWSchaden1_1", "FKWSchaden2_1", "FKWSchaden3_1", "FKWSchaden4_1", "FKWSchaden1_2", "FKWSchaden2_2", "FKWSchaden3_2", "FKWSchaden4_2", "FKWReichweite1", "FKWReichweite2", "FKWReichweite3", "FKWReichweite4"], function(values) {
		if (values.FKW_Aktiv == 1) {
			setAttrs({
				FK_Aktiv_Waffe: values.FKWFK1,
				FTP_W_Aktiv_Waffe: values.FKWSchaden1_1,
				FTP_Bonus_Aktiv_Waffe: values.FKWSchaden1_2,
				FKWReichweite: values.FKWReichweite1
   			});
		}
		if (values.FKW_Aktiv == 2) {
			setAttrs({
				FK_Aktiv_Waffe: values.FKWFK2,
				FTP_W_Aktiv_Waffe: values.FKWSchaden2_1,
				FTP_Bonus_Aktiv_Waffe: values.FKWSchaden2_2,
				FKWReichweite: values.FKWReichweite2
   			});
		}
		if (values.FKW_Aktiv == 3) {
			setAttrs({
				FK_Aktiv_Waffe: values.FKWFK3,
				FTP_W_Aktiv_Waffe: values.FKWSchaden3_1,
				FTP_Bonus_Aktiv_Waffe: values.FKWSchaden3_2,
				FKWReichweite: values.FKWReichweite3
   			});
		}
		if (values.FKW_Aktiv == 4) {
			setAttrs({
				FK_Aktiv_Waffe: values.FKWFK4,
				FTP_W_Aktiv_Waffe: values.FKWSchaden4_1,
				FTP_Bonus_Aktiv_Waffe: values.FKWSchaden4_2,
				FKWReichweite: values.FKWReichweite4
   			});
		}
   });
});

on("change:rs_art1 change:sf_belastungsgewoehnung_1 change:sf_belastungsgewoehnung_2", function() {
   getAttrs(["RS_Art1", "sf_belastungsgewoehnung_1", "sf_belastungsgewoehnung_2"], function(values) {
		var art = values.RS_Art1;
		var gewoehnung = parseInt(values.sf_belastungsgewoehnung_1) + parseInt(values.sf_belastungsgewoehnung_2);
		var modArt = getModifiedArt(art,gewoehnung);
		var rs = getRS(art);
		var be = getBE(modArt);
		var abzuege = getAbzuege(modArt);
		setAttrs({
			RS1: rs,
			BE1: be,
			RuestungsAbzuege1: abzuege
		});
   });
});

on("change:rs_art2 change:sf_belastungsgewoehnung_1 change:sf_belastungsgewoehnung_2", function() {
   getAttrs(["RS_Art2", "sf_belastungsgewoehnung_1", "sf_belastungsgewoehnung_2"], function(values) {
		var art = values.RS_Art2;
		var gewoehnung = parseInt(values.sf_belastungsgewoehnung_1) + parseInt(values.sf_belastungsgewoehnung_2);
		var modArt = getModifiedArt(art,gewoehnung);
		var rs = getRS(art);
		var be = getBE(modArt);
		var abzuege = getAbzuege(modArt);
		setAttrs({
			RS2: rs,
			BE2: be,
			RuestungsAbzuege2: abzuege
		});
   });
});

on("change:rs_art3 change:sf_belastungsgewoehnung_1 change:sf_belastungsgewoehnung_2", function() {
   getAttrs(["RS_Art3", "sf_belastungsgewoehnung_1", "sf_belastungsgewoehnung_2"], function(values) {
		var art = values.RS_Art3;
		var gewoehnung = parseInt(values.sf_belastungsgewoehnung_1) + parseInt(values.sf_belastungsgewoehnung_2);
		var modArt = getModifiedArt(art,gewoehnung);
		var rs = getRS(art);
		var be = getBE(modArt);
		var abzuege = getAbzuege(modArt);
		setAttrs({
			RS3: rs,
			BE3: be,
			RuestungsAbzuege3: abzuege
		});
   });
});

on("change:rs_art4 change:sf_belastungsgewoehnung_1 change:sf_belastungsgewoehnung_2", function() {
   getAttrs(["RS_Art4", "sf_belastungsgewoehnung_1", "sf_belastungsgewoehnung_2"], function(values) {
		var art = values.RS_Art4;
		var gewoehnung = parseInt(values.sf_belastungsgewoehnung_1) + parseInt(values.sf_belastungsgewoehnung_2);
		var modArt = getModifiedArt(art,gewoehnung);
		var rs = getRS(art);
		var be = getBE(modArt);
		var abzuege = getAbzuege(modArt);
		setAttrs({
			RS4: rs,
			BE4: be,
			RuestungsAbzuege4: abzuege
		});
   });
});

var getRS = function(art) {
	if (art < 0) {
		return 0;
	} else {
		return art;
	}
}

var getBE = function(art) {
	if (art == 0 || art == 1) {
		return 0;
	}
	if (art == 2 || art == 3) {
		return 1;
	}
	if (art == 4 || art == 5) {
		return 2;
	}
	if (art == 6) {
		return 3;
	}
	return 0;
}

var getAbzuege = function(art) {
	if (art == 0 || art == 2 || art == 4 || art == 6) {
		return 0;
	}
	if (art == 1 || art == 3 || art == 5) {
		return -1;
	}
	return 0;
}

var getModifiedArt = function(art, gewoehnung) {
	return parseInt(art) - (parseInt(gewoehnung) * 2);
}

on("change:RuestungAktiv change:RS1 change:RS2 hange:RS3 change:RS4 change:BE1 change:BE2 change:BE3 change:BE4 change:RuestungsAbzuege1 change:RuestungsAbzuege2 change:RuestungsAbzuege3 change:RuestungsAbzuege4 change:RuestungsGewicht1 change:RuestungsGewicht2 change:RuestungsGewicht3 change:RuestungsGewicht4", function() {
   getAttrs(["RuestungAktiv", "RS1", "RS2", "RS3", "RS4", "BE1", "BE2", "BE3", "BE4", "RuestungsAbzuege1", "RuestungsAbzuege2", "RuestungsAbzuege3", "RuestungsAbzuege4", "RuestungsGewicht1", "RuestungsGewicht2", "RuestungsGewicht3", "RuestungsGewicht4"], function(values) {
		var aktiv = values.RuestungAktiv;
		if (aktiv == 1) {
			setAttrs({
				Ges_RS: values.RS1,
				Ges_BE: values.BE1,
				RuestungsAbzuege: values.RuestungsAbzuege1,
				Ges_Gewicht: values.RuestungsGewicht1
   			});
		}
		if (aktiv == 2) {
			setAttrs({
				Ges_RS: values.RS2,
				Ges_BE: values.BE2,
				RuestungsAbzuege: values.RuestungsAbzuege2,
				Ges_Gewicht: values.RuestungsGewicht2
   			});
		}
		if (aktiv == 3) {
			setAttrs({
				Ges_RS: values.RS3,
				Ges_BE: values.BE3,
				RuestungsAbzuege: values.RuestungsAbzuege3,
				Ges_Gewicht: values.RuestungsGewicht3
   			});
		}
		if (aktiv == 4) {
			setAttrs({
				Ges_RS: values.RS4,
				Ges_BE: values.BE4,
				RuestungsAbzuege: values.RuestungsAbzuege4,
				Ges_Gewicht: values.RuestungsGewicht4
   			});
		}
   });
});


on("change:schild_aktiv change:schildpamod1 change:schildpamod2 change:schildpamod3 change:schildpamod4 change:schild_ausgeruestet change:schildpa1 change:schildpa2 change:schildpa3 change:schildpa4", function() {
   getAttrs(["Schild_Aktiv", "SchildPAMod1", "SchildPAMod2", "SchildPAMod3", "SchildPAMod4", "schild_ausgeruestet", "SchildPA1", "SchildPA2", "SchildPA3", "SchildPA4"], function(values) {
		if (values.schild_ausgeruestet == 1) {
			var aktiv = values.Schild_Aktiv;
			if (aktiv == 1) {
				setAttrs({
					PA_Schild_Bonus: values.SchildPAMod1,
					Schild_PA_Aktiv_Ausgeruestet: values.SchildPA1
   				});
			}
			if (aktiv == 2) {
				setAttrs({
					PA_Schild_Bonus: values.SchildPAMod2,
					Schild_PA_Aktiv_Ausgeruestet: values.SchildPA2
   				});
			}
			if (aktiv == 3) {
				setAttrs({
					PA_Schild_Bonus: values.SchildPAMod3,
					Schild_PA_Aktiv_Ausgeruestet: values.SchildPA3
   				});
			}
			if (aktiv == 4) {
				setAttrs({
					PA_Schild_Bonus: values.SchildPAMod4,
					Schild_PA_Aktiv_Ausgeruestet: values.SchildPA4
   				});
			}
		} else {
			setAttrs({
				PA_Schild_Bonus: 0,
				Schild_PA_Aktiv_Ausgeruestet: 0
			});
		}
   });
});

on("change:parierwaffe_aktiv change:parierwaffepamod1 change:parierwaffepamod2 change:parierwaffepamod3 change:parierwaffepamod4 change:parierwaffe_ausgeruestet change:parierwaffepa1 change:parierwaffepa2 change:parierwaffepa3 change:parierwaffepa4", function() {
   getAttrs(["Parierwaffe_Aktiv", "ParierwaffePAMod1", "ParierwaffePAMod2", "ParierwaffePAMod3", "ParierwaffePAMod4", "parierwaffe_ausgeruestet", "ParierwaffePA1", "ParierwaffePA2", "ParierwaffePA3", "ParierwaffePA4"], function(values) {
		if (values.parierwaffe_ausgeruestet == 1) {
			var aktiv = values.Parierwaffe_Aktiv;
			if (aktiv == 1) {
				setAttrs({
					PA_Parierwaffe_Bonus: values.ParierwaffePAMod1,
					Parierwaffe_PA_Aktiv_Ausgeruestet: values.ParierwaffePA1
   				});
			}
			if (aktiv == 2) {
				setAttrs({
					PA_Parierwaffe_Bonus: values.ParierwaffePAMod2,
					Parierwaffe_PA_Aktiv_Ausgeruestet: values.ParierwaffePA2
   				});
			}
			if (aktiv == 3) {
				setAttrs({
					PA_Parierwaffe_Bonus: values.ParierwaffePAMod3,
					Parierwaffe_PA_Aktiv_Ausgeruestet: values.ParierwaffePA3
   				});
			}
			if (aktiv == 4) {
				setAttrs({
					PA_Parierwaffe_Bonus: values.ParierwaffePAMod4,
					Parierwaffe_PA_Aktiv_Ausgeruestet: values.ParierwaffePA4
   				});
			}
		} else {
			setAttrs({
				PA_Parierwaffe_Bonus: 0,
				Parierwaffe_PA_Aktiv_Ausgeruestet: 0
			});
		}
   });
});

on("change:sf_finte_1 change:sf_finte_2 change:sf_finte_3", function() {
	getAttrs(["sf_finte_1", "sf_finte_2", "sf_finte_3"], function(values) {
		if (values.sf_finte_3 == "1") {
			setAttrs({
				sf_finte: 1,
				manoever_finte_1: 0,
				manoever_finte_2: 0,
				manoever_finte_3: 1
			});
		} else if (values.sf_finte_2 == "1") {
			setAttrs({
				sf_finte: 1,
				manoever_finte_1: 0,
				manoever_finte_2: 1,
				manoever_finte_3: 0
			});
		} else if (values.sf_finte_1 == "1") {
			setAttrs({
				sf_finte: 1,
				manoever_finte_1: 1,
				manoever_finte_2: 0,
				manoever_finte_3: 0
			});
		} else {
			setAttrs({
				sf_finte: 0,
				manoever_finte_1: 0,
				manoever_finte_2: 0,
				manoever_finte_3: 0
			});
		}
	});
});

on("change:sf_praeziser_stich_1 change:sf_praeziser_stich_2 change:sf_praeziser_stich_3", function() {
	getAttrs(["sf_praeziser_stich_1", "sf_praeziser_stich_2", "sf_praeziser_stich_3"], function(values) {
		if (values.sf_praeziser_stich_3 == "1") {
			setAttrs({
				sf_praeziser_stich: 1,
				manoever_praeziser_stich_1: 0,
				manoever_praeziser_stich_2: 0,
				manoever_praeziser_stich_3: 1
			});
		} else if (values.sf_praeziser_stich_2 == "1") {
			setAttrs({
				sf_praeziser_stich: 1,
				manoever_praeziser_stich_1: 0,
				manoever_praeziser_stich_2: 1,
				manoever_praeziser_stich_3: 0
			});
		} else if (values.sf_praeziser_stich_1 == "1") {
			setAttrs({
				sf_praeziser_stich: 1,
				manoever_praeziser_stich_1: 1,
				manoever_praeziser_stich_2: 0,
				manoever_praeziser_stich_3: 0
			});
		} else {
			setAttrs({
				sf_praeziser_stich: 0,
				manoever_praeziser_stich_1: 0,
				manoever_praeziser_stich_2: 0,
				manoever_praeziser_stich_3: 0
			});
		}
	});
});

on("change:sf_wuchtschlag_1 change:sf_wuchtschlag_2 change:sf_wuchtschlag_3", function() {
	getAttrs(["sf_wuchtschlag_1", "sf_wuchtschlag_2", "sf_wuchtschlag_3"], function(values) {
		if (values.sf_wuchtschlag_3 == "1") {
			setAttrs({
				sf_wuchtschlag: 1,
				manoever_wuchtschlag_1: 0,
				manoever_wuchtschlag_2: 0,
				manoever_wuchtschlag_3: 1
			});
		} else if (values.sf_wuchtschlag_2 == "1") {
			setAttrs({
				sf_wuchtschlag: 1,
				manoever_wuchtschlag_1: 0,
				manoever_wuchtschlag_2: 1,
				manoever_wuchtschlag_3: 0
			});
		} else if (values.sf_wuchtschlag_1 == "1") {
			setAttrs({
				sf_wuchtschlag: 1,
				manoever_wuchtschlag_1: 1,
				manoever_wuchtschlag_2: 0,
				manoever_wuchtschlag_3: 0
			});
		} else {
			setAttrs({
				sf_wuchtschlag: 0,
				manoever_wuchtschlag_1: 0,
				manoever_wuchtschlag_2: 0,
				manoever_wuchtschlag_3: 0
			});
		}
	});
});

on("change:sf_rundumschlag_1 change:sf_rundumschlag_2", function() {
	getAttrs(["sf_rundumschlag_1", "sf_rundumschlag_2"], function(values) {
		if (values.sf_rundumschlag_2 == "1") {
			setAttrs({
				sf_rundumschlag: 1,
				manoever_rundumschlag_1: 0,
				manoever_rundumschlag_2: 1
			});
		} else if (values.sf_rundumschlag_1 == "1") {
			setAttrs({
				sf_rundumschlag: 1,
				manoever_rundumschlag_1: 1,
				manoever_rundumschlag_2: 0
			});
		} else {
			setAttrs({
				sf_rundumschlag: 0,
				manoever_rundumschlag_1: 0,
				manoever_rundumschlag_2: 0
			});
		}
	});
});

on("sheet:opened change:ff_wert", function() {
	getAttrs(["FF_Wert"], function(values) {
		setAttrs({
			FKW_FK_Bonus_Leiteigenschaft: Math.floor(((values.FF_Wert - 8)/3))
		});
	});
});

on("change:sk_spezies change:mu_wert change:kl_wert change:in_wert change:vorteil_hohe_seelenkraft change:nachteil_niedrige_seelenkraft change:gegner_sheet", function() {
	getAttrs(["SK_Spezies", "MU_Wert", "KL_Wert", "IN_Wert", "vorteil_hohe_seelenkraft", "nachteil_niedrige_seelenkraft", "gegner_sheet"], function(values) {
		if (parseInt(values.gegner_sheet) != 1) {
			var sk_spezies = parseInt(values.SK_Spezies);
			var MU_Wert = parseInt(values.MU_Wert);
			var KL_Wert = parseInt(values.KL_Wert);
			var IN_Wert = parseInt(values.IN_Wert);
			var Hohe_SK = parseInt(values.vorteil_hohe_seelenkraft);
			var Niedrige_SK = parseInt(values.nachteil_niedrige_seelenkraft);
			setAttrs({
				SK_Grundwert: sk_spezies + Math.round((MU_Wert + KL_Wert + IN_Wert) / 6) + Hohe_SK - Niedrige_SK
			});
		}
	});
});

on("change:zk_spezies change:ko_wert change:kk_wert change:vorteil_hohe_zaehigkeit change:nachteil_niedrige_zaehigkeit change:gegner_sheet", function() {
	getAttrs(["ZK_Spezies", "KO_Wert", "KK_Wert", "vorteil_hohe_zaehigkeit", "nachteil_niedrige_zaehigkeit", "gegner_sheet"], function(values) {
		if (parseInt(values.gegner_sheet) != 1) {
			var zk_spezies = parseInt(values.ZK_Spezies);
			var KO_Wert = parseInt(values.KO_Wert);
			var KK_Wert = parseInt(values.KK_Wert);
			var Hohe_ZK = parseInt(values.vorteil_hohe_zaehigkeit);
			var Niedrige_ZK = parseInt(values.nachteil_niedrige_zaehigkeit);
			setAttrs({
				ZK_Grundwert: zk_spezies + Math.round((KO_Wert + KO_Wert + KK_Wert) / 6) + Hohe_ZK - Niedrige_ZK
			});
		}
	});
});

on("change:ge_wert change:optpa_gw change:sf_verb_ausweichen_1 change:sf_verb_ausweichen_2 change:sf_verb_ausweichen_3 change:ges_be change:gegner_sheet", function() {
	getAttrs(["GE_Wert", "optPA_GW", "sf_verb_ausweichen_1", "sf_verb_ausweichen_2", "sf_verb_ausweichen_3", "Ges_BE", "gegner_sheet"], function(values) {
		if (parseInt(values.gegner_sheet) != 1) {
			var GE_Wert = parseInt(values.GE_Wert);
			var optPA = parseInt(values.optPA_GW);
			var sf_verb_ausweichen = parseInt(values.sf_verb_ausweichen_1) + parseInt(values.sf_verb_ausweichen_2) + parseInt(values.sf_verb_ausweichen_3);
			var Ges_BE = parseInt(values.Ges_BE);
			setAttrs({
				Ausweichen_Wert: Math.round(GE_Wert / 2) + (optPA / 2) + sf_verb_ausweichen - Ges_BE
			});
		}
	});
});

on("change:mu_wert change:ge_wert change:sf_kampfreflexe_1 change:sf_kampfreflexe_2 change:sf_kampfreflexe_3 change:ges_be change:ruestungsabzuege change:gegner_sheet", function() {
	getAttrs(["MU_Wert", "GE_Wert", "sf_kampfreflexe_1", "sf_kampfreflexe_2", "sf_kampfreflexe_3", "gegner_sheet", "Ges_BE", "RuestungsAbzuege"], function(values) {
		if (parseInt(values.gegner_sheet) != 1) {
			var MU_Wert = parseInt(values.MU_Wert);
			var GE_Wert = parseInt(values.GE_Wert);
			var sf_kampfreflexe = parseInt(values.sf_kampfreflexe_1) + parseInt(values.sf_kampfreflexe_2) + parseInt(values.sf_kampfreflexe_3);
			var Ges_BE = parseInt(values.Ges_BE);
			var Abzuege = parseInt(values.RuestungsAbzuege);
			setAttrs({
				INI_Wert: Math.round((MU_Wert + GE_Wert) / 2) + sf_kampfreflexe - Ges_BE + Abzuege
			});
		}
	});
});

on("change:gs_spezies change:vorteil_flink change:nachteil_behaebig change:ges_be change:ruestungsabzuege change:gegner_sheet", function() {
	getAttrs(["GS_Spezies", "vorteil_flink", "nachteil_behaebig", "Ges_BE", "RuestungsAbzuege", "gegner_sheet"], function(values) {
		if (parseInt(values.gegner_sheet) != 1) {
			var GS_Spezies = parseInt(values.GS_Spezies);
			var flink = parseInt(values.vorteil_flink);
			var behaebig = parseInt(values.nachteil_behaebig);
			var Ges_BE = parseInt(values.Ges_BE);
			var Abzuege = parseInt(values.RuestungsAbzuege);
			setAttrs({
				GS_Wert: GS_Spezies + flink - behaebig - Ges_BE + Abzuege
			});
		}
	});
});

on("sheet:opened", function() {
	getAttrs(["Spezies", "Tradition", "sf_belastungsgewoehnung_stufe", "sf_finte_stufe", "sf_wuchtschlag_stufe", "sf_praeziser_schuss_stufe", "sf_praeziser_stich_stufe", "sf_rundumschlag_stufe", "version"], function(values) {
		if (values.version != "0.9") {
			setAttrs({
				version: "0.9"
			});
			if (values.Spezies == 3) {
				setAttrs({
					Spezies: "Mensch"
				});
			}
			if (values.Spezies == 5) {
				setAttrs({
					Spezies: "Elf"
				});
			}
			if (values.Spezies == 7) {
				setAttrs({
					Spezies: "Halbelf"
				});
			}
			if (values.Spezies == 11) {
				setAttrs({
					Spezies: "Zwerg"
				});
			}
			if (values.Tradition == 3) {
				setAttrs({
					Tradition: "Gildenmagier"
				});
			}
			if (values.Tradition == 5) {
				setAttrs({
					Tradition: "Hexe"
				});
			}
			if (values.Tradition == 6) {
				setAttrs({
					Tradition: "Elf"
				});
			}
			if (values.Tradition == 11) {
				setAttrs({
					Tradition: "Goblinzauberinnen"
				});
			}
			if (values.Tradition == 13) {
				setAttrs({
					Tradition: "Zibilja"
				});
			}
			if (parseInt(values.sf_belastungsgewoehnung_stufe) >= 1) {
				setAttrs({
					sf_belastungsgewoehnung_1: 1
				});
			}
			if (parseInt(values.sf_belastungsgewoehnung_stufe) >= 2) {
				setAttrs({
					sf_belastungsgewoehnung_2: 1
				});
			}
			if (parseInt(values.sf_finte_stufe) >= 1) {
				setAttrs({
					sf_finte_1: 1
				});
			}
			if (parseInt(values.sf_finte_stufe) >= 2) {
				setAttrs({
					sf_finte_2: 1
				});
			}
			if (parseInt(values.sf_finte_stufe) == 3) {
				setAttrs({
					sf_finte_3: 1
				});
			}
			if (parseInt(values.sf_wuchtschlag_stufe) >= 1) {
				setAttrs({
					sf_wuchtschlag_1: 1
				});
			}
			if (parseInt(values.sf_wuchtschlag_stufe) >= 2) {
				setAttrs({
					sf_wuchtschlag_2: 1
				});
			}
			if (parseInt(values.sf_wuchtschlag_stufe) == 3) {
				setAttrs({
					sf_wuchtschlag_3: 1
				});
			}
			if (parseInt(values.sf_praeziser_schuss_stufe) >= 1) {
				setAttrs({
					sf_praeziser_schuss_1: 1
				});
			}
			if (parseInt(values.sf_praeziser_schuss_stufe) >= 2) {
				setAttrs({
					sf_praeziser_schuss_2: 1
				});
			}
			if (parseInt(values.sf_praeziser_schuss_stufe) == 3) {
				setAttrs({
					sf_praeziser_schuss_3: 1
				});
			}
			if (parseInt(values.sf_praeziser_stich_stufe) >= 1) {
				setAttrs({
					sf_praeziser_stich_1: 1
				});
			}
			if (parseInt(values.sf_praeziser_stich_stufe) >= 2) {
				setAttrs({
					sf_praeziser_stich_2: 1
				});
			}
			if (parseInt(values.sf_praeziser_stich_stufe) == 3) {
				setAttrs({
					sf_praeziser_stich_3: 1
				});
			}
			if (parseInt(values.sf_rundumschlag_stufe) >= 1) {
				setAttrs({
					sf_rundumschlag_1: 1
				});
			}
			if (parseInt(values.sf_rundumschlag_stufe) == 2) {
				setAttrs({
					sf_rundumschlag_2: 1
				});
			}
		}
	});
});

</script>